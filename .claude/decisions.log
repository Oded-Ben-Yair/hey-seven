[2026-02-12] DECISION: LangGraph as primary agent framework — CTO preference, production-grade state machine model
[2026-02-12] DECISION: GCP Cloud Run for deployment — stack alignment with Hey Seven's infrastructure
[2026-02-12] DECISION: Gemini 2.5 Flash as primary LLM — GCP alignment, cost-effective at $0.30/1M input tokens
[2026-02-12] DECISION: Firestore + FirestoreSaver for state management — LangGraph native support, GCP-native
[2026-02-12] DECISION: FastAPI for backend — LangGraph is Python, natural fit
[2026-02-12] DECISION: Next.js + React for frontend — listed as nice-to-have in job posting, Oded's strength
[2026-02-12] DECISION: GitHub (not Azure DevOps) for this project — private repo, interview context, isolation from work projects
[2026-02-12] DECISION: Pre-build infrastructure before assignment arrives — speed of delivery is part of wow factor
[2026-02-12] DECISION: state_modifier= (not prompt=) for create_react_agent — compatible with pinned langgraph==0.2.60
[2026-02-12] DECISION: hmac.compare_digest() for API key comparison — prevents timing attacks
[2026-02-12] DECISION: FirestoreSaver is COMMUNITY package, not official LangGraph — document clearly to avoid misleading
[2026-02-12] DECISION: Assignment reception protocol — NO CODE before multi-LLM debate + architecture doc + hostile review + user approval
[2026-02-12] DECISION: PDFs moved from project root to research/personas/ — clean project tree
[2026-02-12] DECISION: Created research/langgraph-latest.md — comprehensive LangGraph 1.0.8 intel from Grok X search + Perplexity deep research
[2026-02-12] DECISION: Created research/frontend-latest.md — React 19.2, AI SDK 6, Tailwind 4, shadcn/ui + Prompt Kit ecosystem
[2026-02-12] DECISION: Vercel AI SDK 6 (useChat hook) is THE standard for streaming chat UIs — 20M+ monthly npm downloads
[2026-02-12] DECISION: SSE (not WebSocket) for LLM streaming — unidirectional, auto-reconnect, AI SDK handles it
[2026-02-12] DECISION: Gemini 2.5 cannot combine bind_tools + with_structured_output — use two-node graph or bind Pydantic as tool
[2026-02-12] DECISION: LangGraph middleware system (before_model, after_model, wrap_tool_call) is the v1.0 way to do dynamic prompts and guardrails
[2026-02-12] DECISION: MemorySaver/InMemorySaver is DEV ONLY — unbounded RAM growth in production. PostgresSaver or FirestoreSaver for prod
[2026-02-12] DECISION: Zero casino/gaming LangGraph implementations found publicly — Hey Seven is first mover in this space
[2026-02-12] DECISION: Cached bind_tools in nodes.py (get_llm_with_tools singleton) — avoid per-invocation overhead
[2026-02-13] DECISION: 3-LLM-call pattern (router→generator→validator) chosen over simpler 2-call — defense-in-depth for regulated industry. Validator node can be disabled via single conditional edge change.
[2026-02-13] DECISION: Template.safe_substitute() replaces .format() — prevents DoS via curly braces in user input
[2026-02-13] DECISION: Pure ASGI middleware only — BaseHTTPMiddleware breaks SSE streaming
[2026-02-13] DECISION: SecurityHeadersMiddleware added — X-Content-Type-Options: nosniff, X-Frame-Options: DENY, HSTS note for production
[2026-02-13] DECISION: Router confidence field used for low-confidence rerouting (< 0.7 → safe RAG path)
[2026-02-13] DECISION: request_id propagated through LangGraph config["configurable"] for end-to-end trace correlation
[2026-02-13] DECISION: structlog.configure() with JSONRenderer + TimeStamper for Cloud Logging compatibility
[2026-02-13] DECISION: MAX_ACTIVE_THREADS=1000 with LRU eviction for InMemorySaver OOM protection
[2026-02-13] DECISION: Docker base images pinned to patch versions (python:3.12.8-slim, nginx:1.27-alpine) for reproducibility
[2026-02-13] DECISION: Cloud Build pipeline includes pytest test gate before image build
[2026-02-13] DECISION: Architecture doc review rounds use TEAM SWARM pattern to avoid context overflow — review-lead coordinates, findings go to files, main lead sees only summaries
